var appender,arraySortFunction,audioPlay,basketArrayCheck,basketMarketUpdate,basketOutcomeUpdate,basketSuspendList,basketSuspendUpdate,checkForBasket,clone,drawTmplMsgDrawField,eventCPYRHigh,eventInsertCenter,eventInsertLeftMenu,favMarketDelete,helpResTypeCleaner,init,leftMenuCounter,marketCount,marketInsertChanger,marketIsFav,marketReplace,marketReplaceList,marketSoloInserter,marketSuspendUpdate,operaUpdateResult,push_events_outcomes,socket,socketBasketUnlock,socketEventDelete,socketEventInsert,socketEventServing,socketEventSetScore,socketEventSuspend,socketEventUNSuspend,socketEventUndoScore,socketEventUpdate,socketMarketDelete,socketMarketDeleteList,socketMarketGloablInsert,socketMarketHeadInsert,socketMarketInsert,socketMarketInsertList,socketMarketSSuspend,socketMarketSUnsuspend,socketMarketSuspend,socketMarketUnsuspend,socketMarketUpdate,socketOutcomeUpdate,socketRtsParams,socketRtsStack,socketRtsUpdate,socketSetFinished,socketSwitcher,socketTimer,socketUpdateResult,socketrun,soloEventSuspend,soloMarketDelete,soloMarketSuspendList,soloOutcomeUpdate,soloOutcomeUpdateList,soundInit,temp,updateresult;socket=null;socketrun=false;window.global_timers=[];temp={};window.rtstimerwork=false;window.rts2sec=[];window.rtslast=null;updateresult=[];window.timers={};window.subsr={};window.START_TIME=0;operaUpdateResult=function(b){var a;return a=$.json.decode(b)};arraySortFunction=function(d,c){return d-c};clone=function(c){var b,a;if((c==null)||typeof c!=="object"){return c}a=new c.constructor();for(b in c){a[b]=clone(c[b])}return a};soundInit=function(){var a,b;if(!createjs.Sound.initializeDefaultPlugins()){return}a="/static/audio/";b=[{id:"nba",src:"nba.mp3"},{id:"clock_ticking",src:"clock_ticking.mp3"}];createjs.Sound.alternateExtensions=["ogg"];return createjs.Sound.registerManifest(b,a)};audioPlay=function(a){if($.cookie("soundbasket")==="off"){return}switch(a){case"506":case"507":case"508":case"509":case"510":createjs.Sound.play("clock_ticking");break;case"570":case"17":createjs.Sound.play("nba")}};push_events_outcomes=function(r){var l,s,t,y,x,w,m,u,z,c,n,p,q,g,e,b,A,C,B,o,j,h,f,d,a;if(r==null){r=true}if(!socketrun){return false}z=[];s=[];$("li[data-eventid]").each(function(k,v){var i;i=$(v).data("eventid");if(i!=null){return z.push(i.toString())}});$("button.open[data-eventid]").each(function(k,v){var i;i=$(v).data("eventid");if(i!=null){return s.push(i.toString())}});$("div.bzd").each(function(k,v){var i;i=$(v).data("eventid");if(i!=null){return z.push(i.toString())}});z=_.uniq(z);s=_.uniq(s);p={};p.timer=z;n={};n.timer=[];$(".cont li:visible li[data-eventid]").each(function(k,v){return n.timer.push($(v).data("eventid").toString())});n.timer=_.uniq(n.timer);l=new Date().getTime();if(_.size(window.timers)===0){o=n.timer;for(g=0,A=o.length;g<A;g++){y=o[g];window.timers[y]=l}}else{j=window.timers;for(w in j){q=j[w];if((l-q)<2000){m=n.timer.indexOf(w);n.timer.splice(m,1)}}}h=n.timer;for(e=0,C=h.length;e<C;e++){y=h[e];window.timers[y]=l}c=$.json.encode(n);if(n.timer<1){c=null}temp["live.event"]=s;temp["live.event"].push("all");if((typeof viewBasketModel!=="undefined"&&viewBasketModel!==null?(f=viewBasketModel.bets)!=null?(d=f.bets)!=null?d.length:void 0:void 0:void 0)>0){a=viewBasketModel.bets.bets;for(b=0,B=a.length;b<B;b++){y=a[b];if(temp!=null){temp["live.event"].push(y.event_id+"")}}}u={};u.subscribe=temp;t=$.json.encode(temp);x=$.json.encode(u);temp["live.jackpot"]=[srid.toString()];if(_.size(p.timer)>0){p.timer=p.timer.sort()}if(global_opera_mini||!global_sockets){poster(opera_update_url+pst+"/","POST",null,{json:x},operaUpdateResult)}else{if(!_.isEqual(window.subsr,temp)){socket.send($.json.encode({dataop:temp}));window.subsr=clone(temp)}if(p.timer.length>0&&!_.isEqual(window.timers.timer,p.timer)){socket.send($.json.encode({subscribe:["frontend_timers",p]}));window.timers=p}}};appender=function(d,b,f,e,c){var a;b=parseFloat(b);d=d.sort(arraySortFunction);if(d.indexOf(b)===(d.length-1)||d.length===1){$(f+":first").append(c)}else{a=d[d.indexOf(b)+1];e=e.replace("%replace%",a);$(e+":first").before(c)}};checkForBasket=function(f){var d,b,c,e,a,g;if(f==null){return}b=false;if((f!=null?f.type:void 0)!=null){switch(f.type){case"market.unsuspend":case"market.insert":case"market.suspend":case"market.unvisible":case"market.update":b=basketArrayCheck(f.data.market_id);if(b){break}break;case"market.suspend_list":case"market.unsuspend_list":e=f.data.market_id;for(d in e){c=e[d];b=basketArrayCheck(c);if(b){break}}break;case"outcome.update_list":a=f.data.outcomes;for(d in a){c=a[d];b=basketArrayCheck(c.market_id);if(b){break}}}}if((f!=null?f.outcomes:void 0)!=null){g=f.outcomes;for(d in g){c=g[d];b=basketArrayCheck(c.market_id);if(b){break}}}if(b&&(!viewBasketModel.done)){refresh_store_noxmpp()}return b};basketArrayCheck=function(b){var a;a=viewBasketModel.getMarkets().indexOf(b);if(a>=0){return true}return false};leftMenuCounter=function(){$("#sideLeft b[rel=sportcount]").html($(".Selbets li[data-eventid]").size());$("#sideLeft ul.sportslist li[data-sport_weigh]").each(function(b,c){var a;a=$("#sideLeft ul.sportslist li[data-sport_weigh]:eq("+b+") ul li[data-eventid]").size();return $("#sideLeft ul.sportslist li[data-sport_weigh]:eq("+b+") div.col3").html("("+a+")")})};soloMarketDelete=function(a){var b;if(a==null){return false}if((typeof solo_event!=="undefined"&&solo_event!==null)&&solo_event.solo){if((((b=solo_event.head_market)!=null?b.market_id:void 0)!=null)&&solo_event.head_market.market_id===a){solo_event.head_market={};return}return _.remove(solo_event.result_types,function(c){_.remove(c.market_groups,function(d){_.remove(d.markets,function(e){return e.market_id===a});return _.size(d.markets)===0});return _.size(c.market_groups)===0})}};marketInsertChanger=function(b){var a;a={result_type_name:b.result_type_name,result_type_id:b.result_type_id,result_type_weigh:b.result_type_weigh,market_groups:[{market_name:b.market_name,market_template_id:b.market_template_id,market_template_weigh:b.market_template_weigh,markets:[{market_id:b.market_id,market_order:parseInt(b.market_order,10),market_suspend:b.market_suspend,outcomes:b.outcomes,cnt:_.size(b.outcomes),fav:marketIsFav(b.market_template_id,b.result_type_id),result_type_id:b.result_type_id}]}]};_.each(a.market_groups[0].markets[0].outcomes,function(c){c.event_id=b.event_id;c.market_id=b.market_id;c.market_suspend=b.market_suspend;c.outcome_show=outcome_convert(c.outcome_coef);return c.percent_val="no"});return a};soloOutcomeUpdate=function(a){return _.each(solo_event.result_types,function(b){return _.each(b.market_groups,function(c){return _.each(c.markets,function(e){var d;if(a[e.market_id]!=null){d=_.groupBy(a[e.market_id],"outcome_id");return _.each(e.outcomes,function(g){var f;if(d[g.outcome_id]!=null){f=_.first(d[g.outcome_id]);g.outcome_coef=f.outcome_coef;return g.outcome_visible=f.outcome_visible}})}})})})};soloMarketSuspendList=function(b,a){if(a==null){a="yes"}if((typeof solo_event!=="undefined"&&solo_event!==null)&&solo_event.solo){return _.each(solo_event.result_types,function(c){return _.each(c.market_groups,function(d){return _.each(d.markets,function(e){if(_.indexOf(b,e.market_id)){return e.market_suspend=a}})})})}};soloEventSuspend=function(a,b){if(a==null){a=0}if(b==null){b="yes"}if((typeof solo_event!=="undefined"&&solo_event!==null)&&solo_event.solo&&solo_event.event_id===a){return _.each(solo_event.result_types,function(c){return _.each(c.market_groups,function(d){return _.each(d.markets,function(e){return e.market_suspend=b})})})}};soloOutcomeUpdateList=function(a){var b;if((typeof solo_event!=="undefined"&&solo_event!==null)&&solo_event.solo){b=_.groupBy(a.outcomes,"market_id");return soloOutcomeUpdate(b)}};eventInsertLeftMenu=function(e){var f,a,b,d,c;c={sport_name:e.sport_name,sport_id:e.sport_id,sport_weigh:e.sport_weigh,count:1,events:[]};a={event_id:e.event_id,event_name:e.event_name,event_result_total:e.event_result_total,event_is_favorite:e.event_is_favorite};if(e.category_weigh!=null){a.event_weigh=parseInt(addZero(e.sport_weigh,3)+addZero(e.category_weigh,4)+addZero(e.tournament_weigh,4)+addZero(e.event_weigh,3)+""+(e.event_dt/100),10)}else{a.event_weigh=parseInt(addZero(e.sport_weigh,3)+addZero(e.tournament_weigh,4)+addZero(e.event_weigh,3)+""+(e.event_dt/100),10)}c.events.push(a);if($("#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"]").size()>0){f=$("#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"] ul.sp-lst-ev li").size();$("#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"] div.col3").html("("+ ++f+")");b=$("#erlybet_sportmenu_event").render(c.events);d=[];$("#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"] ul.sp-lst-ev li[data-event_weigh]").each(function(g,h){return d.push($(h).data("event_weigh"))});d.push(a.event_weigh);appender(d,a.event_weigh,"#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"] ul.sp-lst-ev","#sideLeft ul.sportslist li[data-sport_weigh="+c.sport_weigh+"] ul.sp-lst-ev li[data-event_weigh='%replace%']",b)}else{b=$("#erlybet_sportmenu_tpl").render(c);d=[];$("#sideLeft ul.sportslist li[data-sport_weigh]").each(function(g,h){return d.push($(h).data("sport_weigh"))});d.push(parseInt(c.sport_weigh,10));appender(d,c.sport_weigh,"#sideLeft ul.sportslist","#sideLeft ul.sportslist li[data-sport_weigh='%replace%']",b)}if(e.event_tv_channel||e.event_broadcast_url){$("#sideLeft ul.sportslist li[data-eventid="+e.event_id+"]").addClass("tv")}};eventInsertCenter=function(h){var a,d,b,c,f,e,g;a=parseInt(addZero(h.event_weigh,3)+""+(h.event_dt/100),10);b=new EventBuilder(h);b.event_weigh=a;b.event_dt=b.event_dt.substr(0,5);b.showtv=boolConvert(g_user_tv_check);f=$("#market_headtemplate_all_way").render(b);if($("div.content li[data-tid="+h.tournament_id+"]").length>0){e=[];$("div.content li[data-tid="+h.tournament_id+"] ul.tourfull li[data-event_weigh]").each(function(i,j){return e.push($(j).data("event_weigh"))});e.push(b.event_weigh);appender(e,b.event_weigh,"div.content li[data-tid="+h.tournament_id+"] ul.tourfull","div.content li[data-tid="+h.tournament_id+"] ul.tourfull li[data-event_weigh='%replace%']",f);$("li[data-eventid="+h.event_id+"] div.ten-serv-bl").hide()}else{g={};g.id=h.tournament_id;if(h.category_weigh!=null){g.tournament_weigh=addZero(h.sport_weigh)+addZero(h.category_weigh,4)+addZero(h.tournament_weigh,4)}else{g.tournament_weigh=addZero(h.sport_weigh)+addZero(h.tournament_weigh,4)+h.tournament_id}g.tournament_weigh=parseInt(g.tournament_weigh,10);g.sport_id=h.sport_id;g.sport_name=h.sport_name;g.category_name=h.category_name;g.name=h.tournament_name;e=[];$("div.content ul.betlist li[data-tournament_weigh]").each(function(i,j){return e.push($(j).data("tournament_weigh"))});e.push(g.tournament_weigh);d={};d.tournament=[];d.tournament.push(g);c=$("#bets_tournament_tpl").render(d);appender(e,g.tournament_weigh,"div.content ul.betlist","div.content ul.betlist li[data-tournament_weigh='%replace%']:first",c);$(f).appendTo($("div.content ul.betlist li[data-tid='"+h.tournament_id+"'] ul.tourfull"));$("li[data-eventid="+h.event_id+"] div.ten-serv-bl").hide()}};socketEventInsert=function(b){var a;if($("li[data-eventid="+b.data.event_id+"]").size()>0){return}else{eventInsertLeftMenu(b.data);push_events_outcomes();a=true;if(marine.get("sports")){if(marine.get("sports").indexOf(b.data.sport_id)>=0){a=true}else{a=false}}if(!marine.get("event")&&a){eventInsertCenter(b.data);if($("div[rel=livediv]:visible").length<1){$("div[rel=livediv]").show();$("div.noev").hide();$("div.nohev").hide()}}}};drawTmplMsgDrawField=function(a){var b;if(((b=marine.get("event"))!=null?b[0]:void 0)===a.data.event_id){$(".resinfo_bl span.st_dsk_gr1").html(a.data.event_comment_template_comment[0]);return $(".resinfo_bl span.st_dsk_gr2").html(a.data.event_comment_template_comment[1])}};socketEventUpdate=function(b){var a,c;a=convertEventTime(b.data.event_dt);a=a.substr(0,5);$("ul[data-eventid="+b.data.event_id+"] li.col1").html(a);$("ul[data-eventid="+b.data.event_id+"] li.col6 label b.ttt").html(b.data.event_name);$(".ext-commnt[data-eventid="+b.data.event_id+"]").empty();if(b.data.event_status_desc_name!=null){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc]").html(b.data.event_status_desc_name);$("span.st_dsk_nm[data-eventid="+b.data.event_id+"]").html(b.data.event_status_desc_name)}if(((c=b.data.event_status_desc_name)!=null?c.length:void 0)>0){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc]").show();$("span.st_dsk_nm[data-eventid="+b.data.event_id+"]").show()}else{$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc]").hide();$("span.st_dsk_nm[data-eventid="+b.data.event_id+"]").hide()}if((b.data.event_broadcast_url!=null)&&b.data.event_broadcast_url!==null){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=brul] a").attr("href",b.data.event_broadcast_url);$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=brul]").show()}if(b.data.event_broadcast_url===null){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=brul]").hide();$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=brul] a").attr("href","#")}b.data.event_comment_template_comment=commentArrayFix(b.data.event_comment_template_comment);drawTmplMsgDrawField(b);$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr1]").html(b.data.event_comment_template_comment[0]);$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr2]").html(b.data.event_comment_template_comment[1]);if(b.data.event_comment_template_comment[0].length>0){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr1]").show()}else{$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr1]").hide()}if(b.data.event_comment_template_comment[1].length>0){$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr2]").show()}else{$("div.ev-descr[event_id="+b.data.event_id+"] span[rel=desc_gr2]").hide()}if(b.data.event_tv_channel){if(boolConvert(g_user_tv_check)){$("li[data-eventid="+b.data.event_id+"] div.tv").html($("#tvchannel_tpl").render(b.data.event_tv_channel))}else{$("li[data-eventid="+b.data.event_id+"] div.tv").html($("#tvchannel_tpl_false").render(b.data.event_tv_channel))}}else{$("li[data-eventid="+b.data.event_id+"] div.tv").empty()}if(b.data.event_enet_stat_url){return $("li[data-eventid="+b.data.event_id+"] div.stat").html($("#enetstat_tpl").render(b.data.event_enet_stat_url))}else{return $("li[data-eventid="+b.data.event_id+"] div.stat").empty()}};favMarketDelete=function(c){var a,b;if(solo_event.solo){b=$("ul.result_type li.favmarkets li[data-mid="+c+"]").parent();a=b.prev("div.market");b.remove();return a.remove()}};socketMarketDelete=function(c,b,a){if(b==null){b=false}if(a==null){a=true}favMarketDelete(c);$("ul.result_type li[class!=favmarkets] li[data-mid="+c+"]").remove();$("ul.mrk-itm li.bets_fullmark_body[market_id="+c+"]").remove();if(a){soloMarketDelete(c)}if(!b){return helpResTypeCleaner()}};helpResTypeCleaner=function(){$("#content  ul.markets").each(function(a,b){if($(b).children("li").length===0){return $(b).parent().remove()}});return $("#content ul.market_groups").each(function(a,b){if($(b).children("li").length===0){return $(b).parent().remove()}})};socketMarketDeleteList=function(c){var b,e,a,d;d=c.data.market_id;for(e=0,a=d.length;e<a;e++){b=d[e];socketMarketDelete(b,true)}return helpResTypeCleaner()};socketMarketSuspend=function(a){var b;b=$("#content button[rel="+a.data.market_id+"]");b.attr("disabled",true);b.parent("label").addClass("no");return soloMarketSuspendList([a.data.market_id])};socketMarketUnsuspend=function(a){var b;b=$("#content button[rel="+a.data.market_id+"]");b.attr("disabled",false);b.parent("label").removeClass("no");return soloMarketSuspendList([a.data.market_id],"no")};socketMarketSSuspend=function(d){var c,g,f,b,e,a;soloMarketSuspendList([d.data.market_id]);e=d.data.market_id;a=[];for(f=0,b=e.length;f<b;f++){c=e[f];g=$("#content button[rel="+c+"]");g.attr("disabled",true);a.push(g.parent("label").addClass("no"))}return a};socketMarketSUnsuspend=function(d){var c,g,f,b,e,a;soloMarketSuspendList([d.data.market_id],"no");e=d.data.market_id;a=[];for(f=0,b=e.length;f<b;f++){c=e[f];g=$("#content button[rel="+c+"]");g.attr("disabled",false);a.push(g.parent("label").removeClass("no"))}return a};marketCount=function(a){if(a.market_count>0){$("button[data-eventid="+a.event_id+"]").html("+"+a.market_count)}else{$("button[data-eventid="+a.event_id+"]").html("+0").hide()}};socketEventDelete=function(e){var a,b,g,d,f,c;b=$("li[data-eventid="+e.data.event_id+"]");f=b.parent().data("tid");b.remove();if($("div.livediv ul.tourfull[data-tid="+f+"] li").length<1){$("div.livediv li.tour-bl[rel="+f+"]").remove()}if($("div.favdiv ul.tourfull[data-tid="+f+"] li").length<1){$("div.favdiv li.tour-bl[rel="+f+"]").remove()}g=$('ul[class="betlist fav live"] li');d=$('ul[class="betlist live"] li');if(g.length===0){$("div[rel=favoritesdiv]").hide()}if(d.length===0){$("div[rel=livediv]").hide()}if(g.length===0&&d.length===0){$("div.noev").show()}$("#sideLeft li[class='sp-mn-ev'][data-eventid="+e.data.event_id+"]").remove();$("#sideLeft li[class^=cl][data-sportid]").each(function(h,i){if($(i).children("ul").children("li").length===0){return $(i).remove()}});a=marine.get("event");if(a&&(parseInt(a,10)===e.data.event_id)){c=location.href;c=c.split("#");location.href=c[0]}return push_events_outcomes()};socketMarketUpdate=function(d){var c,f,b,e,a;$("li[data-mid="+d.data.market_id+"]").parent().prev("div.bets_fullmark_head").children("span[rel=mname]").html(d.data.market_name);e=d.data.outcomes;a=[];for(f=0,b=e.length;f<b;f++){c=e[f];c.outcome_show=outcome_convert(c.outcome_coef);a.push($("button[oid="+c.outcome_id+"]").val(c.outcome_show).prev("span").html(c.outcome_name))}return a};socketMarketGloablInsert=function(b,a){if(a==null){a=false}if((b.data.market_is_head!=null)&&b.data.market_is_head==="yes"){return socketMarketHeadInsert(b)}else{return socketMarketInsert(b,a)}};socketMarketInsertList=function(a){return _.map(a.data,function(c){var b;b={data:c};return socketMarketGloablInsert(b,true)})};socketMarketHeadInsert=function(d){var b,c,f,a,e;c=d.data.outcomes.length;$("ul.mrk-head[data-eventid="+d.data.event_id+"]").removeClass("t0").removeClass("t2").removeClass("t2").removeClass("t3").addClass("t"+c);e=d.data.outcomes;for(f=0,a=e.length;f<a;f++){b=e[f];b.market_id=d.data.market_id;b.outcome_show=outcome_convert(b.outcome_coef);b.market_suspend=d.data.market_suspend;b.percent_val=makeMarketHot(b.outcome_perc_stat);b.event_id=d.data.event_id}return $("ul.mrk-head[data-eventid="+d.data.event_id+"] ul.mrk-itm").prepend($("#market_outcomes_for_all").render(d.data.outcomes))};marketIsFav=function(b,c){var a;if(((a=getFavs()[solo_event.sport_id])!=null?a[c.toString()]:void 0)!=null){if(_.indexOf(getFavs()[solo_event.sport_id][c],b.toString())>=0){return true}}return false};marketSoloInserter=function(c){var a,b;b=marketInsertChanger(c);a=false;_.map(window.solo_event.result_types,function(d){var e;if(d.result_type_id===b.result_type_id){e=false;_.map(d.market_groups,function(f){if(f.market_template_id===b.market_groups[0].market_template_id){f.markets.push(b.market_groups[0].markets[0]);return e=true}});if(e===false){d.market_groups.push(b.market_groups[0]);d.market_groups=_.sortBy(d.market_groups,"market_template_weigh")}return a=true}});if(a===false){window.solo_event.result_types.push(b);window.solo_event.result_types=_.sortBy(window.solo_event.result_types,"result_type_weigh")}return window.solo_event=setMarkable(window.solo_event,"result_type_weigh")};socketMarketInsert=function(j,f){var i,d,b,c,e,a,h,g;if(f==null){f=false}if($("li[market_id="+j.data.market_id+"]").size()>0){return false}g=j.data.outcomes;for(e=0,h=g.length;e<h;e++){d=g[e];d.event_id=j.data.event_id;d.market_id=j.data.market_id;d.market_suspend=j.data.market_suspend;d.outcome_show=outcome_convert(d.outcome_coef);d.percent_val=makeMarketHot(d.outcome_perc_stat)}if((window.solo_event.solo!=null)&&window.solo_event.solo){marketSoloInserter(j.data);if(marketIsFav(j.data.market_template_id,j.data.result_type_id)){j.data.markets=[];j.data.markets.push(j.data);$($("#onefavmark").render(j.data)).prependTo("ul.result_type[data-eventid="+j.data.event_id+"] li.favmarkets");viewBasketModel.showOutcomeInBasket();return}}if($("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"]").length<1){b={};b.result_type_weigh=j.data.result_type_weigh;b.result_type_name=j.data.result_type_name;b.market_groups=[];i={};i.market_template_id=j.data.market_template_id;i.market_name=j.data.market_name;i.markets=[];i.markets.push(j.data);i.result_type_id=j.data.result_type_id;b.market_groups.push(i);c=$("#market_for_result_types").render(b);a=[];$("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh]").each(function(k,l){return a.push($(l).data("result_type_weigh"))});a.push(j.data.result_type_weigh);appender(a,j.data.result_type_weigh,"ul.result_type[data-eventid="+j.data.event_id+"]","ul.result_type[data-eventid="+j.data.event_id+"] li[data-result_type_weigh=%replace%]",c)}else{if($("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid="+j.data.market_template_id+"]").length<1||$("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid="+j.data.market_template_id+"][data-clue='"+j.data.market_name+"']").length<1){j.data.markets=[];j.data.markets.push(j.data);c=$("#market_groupsid").render(j.data);a=[];$("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid]").each(function(k,l){return a.push($(l).data("marketgroupsid"))});a.push(j.data.market_template_id);a=_.uniq(a);appender(a,j.data.market_template_id,"ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] ul.market_groups","ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid=%replace%]",c)}else{j.data.markets=[];j.data.markets.push(j.data);c=$("#market_for_all").render(j.data);a=[];$("ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid="+j.data.market_template_id+"] li[data-mo]").each(function(k,l){return a.push($(l).data("mo"))});a.push(j.data.market_order);appender(a,j.data.market_order,"ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid="+j.data.market_template_id+"] ul.markets","ul[data-eventid="+j.data.event_id+"] li[data-result_type_weigh="+j.data.result_type_weigh+"] li[data-marketgroupsid="+j.data.market_template_id+"] li.mrkts[data-mo='%replace%']",c);a=a.sort(arraySortFunction)}}if(f===false){return viewBasketModel.showOutcomeInBasket()}};basketOutcomeUpdate=function(e){var c,b,d,g,a,f;if(!viewBasketModel.done){f=e.data.outcomes;for(g=0,a=f.length;g<a;g++){d=f[g];c=$(".bbet_coef[outcomeid="+d.outcome_id+"]");b=parseFloat(c.html());if(b!==d.outcome_coef){c.addClass("coef_chn")}}}};basketMarketUpdate=function(c){var b,e,a,d;if(!viewBasketModel.done){d=c.data.outcomes;for(e=0,a=d.length;e<a;e++){b=d[e];$(".bbet_name[outcomeid="+b.outcome_id+"] div.b_ev_n span.outcmn").addClass("chng")}}};basketSuspendList=function(d){var b,c,f,a,e;if(!viewBasketModel.done){c="market.suspend";if(d.type==="market.unsuspend_list"){c="market.unsuspend"}e=d.data.market_id;for(f=0,a=e.length;f<a;f++){b=e[f];marketSuspendUpdate(b,c)}}};basketSuspendUpdate=function(a){if(!viewBasketModel.done){if(a.type==="market.unsuspend"){marketSuspendUpdate(a.data.market_id,"market.unsuspend")}else{marketSuspendUpdate(a.data.market_id,"market.suspend")}}};marketSuspendUpdate=function(c,b){var a;a=$(".bbet_name[market_id="+c+"] .bbet_coef");if(b==="market.unsuspend"){a.removeClass("outc_susp")}else{a.addClass("outc_susp")}};socketOutcomeUpdate=function(f){var d,c,a,e,h,b,g;soloOutcomeUpdateList(f.data);g=f.data.outcomes;for(h=0,b=g.length;h<b;h++){c=g[h];d=$("button[oid="+c.outcome_id+"]");e=parseFloat(d.attr("ocf"));d.attr("ocf",c.outcome_coef);c.outcome_show=outcome_convert(c.outcome_coef);d.html(" "+c.outcome_show+" ");a=parseFloat(c.outcome_coef);if(a>1){d.show()}else{d.hide()}if(a>e){d.addClass("up");(function(i){return setTimeout((function(){return i.removeClass("up")}),4000)})(d)}if(a<e){d.addClass("down");(function(i){return setTimeout((function(){return i.removeClass("down")}),4000)})(d)}}};eventCPYRHigh=function(f,d){var c,b,e,a;if(d==null){d=null}if(f){e=f.total;a=[];for(c in e){b=e[c];if(d===3&&b.scope_id===29){b.value=null}$(".tbl-ext-scr-1 [data-scopeid="+b.participant_id+"_"+b.scope_id+"]").html(b.value);if(b.scope_id===1){a.push($(".scr-t"+b.number+"[rel="+b.participant_id+"]").html(b.value))}else{a.push(void 0)}}return a}};socketSetFinished=function(a){$("ul.result_type[data-eventid="+a.event_id+"]").remove();return $("button.more[data-eventid="+a.event_id+"]").hide()};socketEventSetScore=function(c){var d,b,a,e;e=$("li[data-eventid="+c.event_id+"]").parent().parent("li").data("sportid");a=marine.get("event");switch(e){case 51:if(a[0]===c.event_id){d=false;b={participant_id:c.participant_id,result_game_dt:c.result_game_dt,result_game_id:c.result_game_id,scope_id:1,value:1};_.map(solo_event.score_history,function(f){if(f.result_type_id===c.result_type_id){f.scores.push(b);return d=true}});if(!d){solo_event.score_history.push({result_type_name:c.result_type_name,result_type_id:c.result_type_id,scores:[b]})}a=new volleyDraw(solo_event,true,true,"set_score");a._servingHide();a._socketScoreUpdate(false);return a.drawGraph()}}};socketEventUndoScore=function(b){var a,c;c=$("li[data-eventid="+b.event_id+"]").parent().parent("li").data("sportid");a=marine.get("event");switch(c){case 51:if(a[0]===b.event_id){_.map(solo_event.score_history,function(d){if(d.result_type_id===b.result_type_id){return d.scores.pop()}});solo_event.score_history=_.filter(solo_event.score_history,function(d){return _.size(d.scores)>0});a=new volleyDraw(solo_event,true);return a._servingHide()}}};socketUpdateResult=function(h){var j,f,d,n,q,b,p,m,o,g,e,c,a,i;window.updateresult[h.event_id]=h;n=$("#timer"+h.event_id).attr("data-rtid");n=parseInt(n,10);$("#timer"+h.event_id).attr("data-rtid",h.event_result_id);if(n!==h.event_result_id){$("#timer"+h.event_id).attr("data-time2","")}if((h.event_result_total_json!=null)&&marine.get("event")[0]===h.event_id){if(h.sport_id!==26){g=h.event_result_total_json.total;for(f in g){o=g[f];$("td[data-scopeid="+o.participant_id+"_"+o.scope_id+"]").html(o.value)}}if(h.sport_id===26){e=h.event_result_total_json.total;for(f in e){o=e[f];$("td[data-scopeid="+o.participant_id+"_"+o.weigh+"]").html(o.value)}}}j=false;p=$("li[data-eventid="+h.event_id+"]").parent().parent("li").data("sportid");if(p===23){j=true}d=marine.get("event");if(d[0]===h.event_id){h.sport_id=$("[data-eventid="+h.event_id+"]").closest("li[data-sportid]").first().data("sportid");if(h.sport_id===1&&h.event_enet_stat_url===null){if((h.event_result_total_json.show_field_urine==null)||h.event_result_total_json.show_field_urine===true){resinfo_bl_draw(h)}else{$(".resinfo_bl").hide()}}if(h.sport_id===51){d=new volleyDraw(h,true,false);d._socketScoreUpdate(true)}}i=eventCornerYellowInsert(h.event_result_total_json,h.event_result_id,j);if(i===null&&(h.sport_id!==23)){h.event_result_total_json={};h.event_result_total_json.show_corner_cards=false;d=marine.get("event");if(d[0]===h.event_id){h.sport_id=$("[data-eventid="+h.event_id+"]").closest("li[data-sportid]").first().data("sportid");if((h.sport_id===2)&&(h.event_rts_data!=null)){q=tennisRTS(h.event_rts_data);if(q){$(".score[event_id="+h.event_id+"] div[rel=tennis] span.home").html(q.homeprcnt);$(".score[event_id="+h.event_id+"] div[rel=tennis] div[rel=home]").css("width",q.homeprcnt);$(".score[event_id="+h.event_id+"] div[rel=tennis] span.away").html(q.awayprcnt);$(".score[event_id="+h.event_id+"] div[rel=tennis] div[rel=away]").css("width",q.awayprcnt)}}}}if(h.event_result_total_json==null){h.event_result_total_json={}}if(h.event_result_total_json.show_corner_cards==null){h.event_result_total_json.show_corner_cards=false}if(h.event_result_total_json.show_corner_cards&&h.sport_id===23){$("div.score[event_id="+h.event_id+"] span[rel=yc]").show();$(".resinfo_bl").show()}if((!h.event_result_total_json.show_corner_cards)&&h.sport_id===23){$("div.score[event_id="+h.event_id+"] span[rel=yc]").hide()}if(h.event_result_total_json.show_corner_cards){$("div.score[event_id="+h.event_id+"] span[rel=yc]").show()}else{$("div.score[event_id="+h.event_id+"] span[rel=yc]").hide()}eventCPYRHigh(h.event_result_total_json,h.event_result_id);if(i){$(".score[event_id="+h.event_id+"] span.corner").html(i.c);$(".score[event_id="+h.event_id+"] span.yellow").html(i.y)}b=h.event_result_total.split(" ")[0].split(":");d=marine.get("event");if(d[0]===h.event_id&&(!$(".resinfo_bl").is(":empty"))){$("div.rts[data-eventid="+h.event_id+"] .tm_1_scr").html(b[0]);$("div.rts[data-eventid="+h.event_id+"] .tm_2_scr").html(b[1]);if(h.sport_id===23&&(marine.get("event")[0]===h.event_id)){m=BasketRTS321Builder(h.event_result_total_json,h.event_rts_data,h.event_result_id);c=m.home;for(f in c){o=c[f];if(o!==null){if(f==="fouls"){if(o>=4){$(".resinfo_bl .team_fld_1 .team_bns").removeClass("nd")}else{$(".resinfo_bl .team_fld_1 .team_bns").addClass("nd")}}$("div.rts[data-eventid="+h.event_id+"] .ext_info_team_1 [rel="+f+"]").html(o)}}a=m.away;for(f in a){o=a[f];if(o!==null){$("div.rts[data-eventid="+h.event_id+"] .ext_info_team_2 [rel="+f+"]").html(o);if(f==="fouls"){if(o>=4){$(".resinfo_bl .team_fld_2 .team_bns").removeClass("nd")}else{$(".resinfo_bl .team_fld_2 .team_bns").addClass("nd")}}}}$("div.rts[data-eventid="+h.event_id+"] [rel=percnt]").append("%")}}if(h.sport_id===23&&(marine.get("event")[0]===h.event_id)){q=RTSInitBuilder(h.event_rts_data);if((typeof results!=="undefined"&&results!==null?results.cset:void 0)!=null){setcolorRTSBasket(q)}}$(".score[event_id="+h.event_id+"] span.ev-result").html(h.event_result_total+" "+h.event_result_name).parent().addClass("ani");$("span[rel=leftresult][eventsid="+h.event_id+"]").html(" ("+h.event_result_total+")");return(function(){return setTimeout((function(){return $(".score[event_id="+h.event_id+"] span.ev-result").html(h.event_result_total+" "+h.event_result_name).parent().removeClass("ani")}),2000)})()};socketTimer=function(b){var a;a=$("#timer"+b.event);if(b.extra&&b.extra==="soccer"){a.attr("data-soccer","yes")}a.attr("data-status",b.action);a.attr("data-time2",b.timer2);a.attr("data-time",b.timer);a.html(soccerTimer(b.event));a.attr("data-vector",b.timer_vector);if(b.action==="pause"){a.stopTime("timer")}$("#timer"+b.event).show().css("display","inline")};socketBasketUnlock=function(){var a;try{$("#basketd").dialog("close")}catch(b){a=b}refresh_store_noxmpp();$(document).stopTime("basketTime");$("#timer").html("0%");viewBasketModel.unlocker=true};socketEventServing=function(c){var a,b,d;b=$("span.partc_feed[eventid="+c.event_id+"]").attr("pid"+c.event_serving);if(!b){b="";$("span.partc_feed[eventid="+c.event_id+"]").css("display","none")}else{$("span.partc_feed[eventid="+c.event_id+"]").css("display","inline-block")}$("span[rel=pname"+c.event_id+"]").html(b);a=marine.get("event");if(a[0]===c.event_id){switch(d=$("li[data-eventid="+c.event_id+"]").parent().parent("li").data("sportid")){case 51:a=new volleyDraw();a._servingUpdate(c.event_serving)}}};socketRtsParams=function(g){var c,d,f,b,e,a;e=g.params;a=[];for(f=0,b=e.length;f<b;f++){c=e[f];d=c;d.event_id=g.event_id;a.push(socketRtsUpdate(d))}return a};socketRtsStack=function(a){if(parseInt(marine.get("event"),10)===a.event_id){switch(a.type){case"522":case"523":case"530":case"531":case"536":case"537":case"538":case"539":case"540":case"541":case"544":case"545":case"546":window.rts2sec.push(a);break;case"timeout":switch(a.value){case"checked":$(".id_51 .num_4").show();break;default:$(".id_51 .num_4").hide()}break;default:window.rtslat=a}if(window.rtstimerwork===false&&window.rts2sec.length>0){window.rtstimerwork=true;socketRtsUpdate(window.rts2sec.splice(0,1)[0]);$(document).everyTime(2000,"rtstimer",function(){if(window.rts2sec.length===0){$(document).stopTime("rtstimer");$(".situation").attr("class","situation");$(".resinfo_bl .situation[data-rel]").hide();window.rtstimerwork=false;if(window.rtslat){socketRtsUpdate(window.rtslat);window.rtslat=null}}else{socketRtsUpdate(window.rts2sec.splice(0,1)[0])}})}if(window.rtslat&&!window.rtstimerwork){socketRtsUpdate(window.rtslat);window.rtslat=null}}};socketRtsUpdate=function(c){var a,d,b;if(parseInt(marine.get("event"),10)===c.event_id){d=$(".livediv li[data-eventid="+c.event_id+"][data-event_weigh]").parent().parent().attr("data-sportid");d=parseInt(d,10);switch(d){case 23:case 51:audioPlay(c.type);break}if(d===26){switch(c.type){case"direction":if(c.value==="0"){$(".ext-field-2 .scr_direction label[rel=down]").show();$(".ext-field-2 .scr_direction label[rel=up]").hide()}else{$(".ext-field-2 .scr_direction label[rel=down]").hide();$(".ext-field-2 .scr_direction label[rel=up]").show()}break;case"outs":$(".ext-field-2 .scr_outs b").html(c.value);break;case"strikes":$(".ext-field-2 .scr_strk b").html(c.value);break;case"balls":$(".ext-field-2 .scr_balls b").html(c.value);break;case"base1":if(c.value==="1"){$(".ext-field-2 .bs1").removeClass("on_0").addClass("on_1")}else{$(".ext-field-2 .bs1").removeClass("on_1").addClass("on_0")}break;case"base2":if(c.value==="1"){$(".ext-field-2 .bs2").removeClass("on_0").addClass("on_1")}else{$(".ext-field-2 .bs2").removeClass("on_1").addClass("on_0")}break;case"base3":if(c.value==="1"){$(".ext-field-2 .bs3").removeClass("on_0").addClass("on_1")}else{$(".ext-field-2 .bs3").removeClass("on_1").addClass("on_0")}break;case"base4":if(c.value==="1"){$(".ext-field-2 .bs4").removeClass("on_0").addClass("on_1")}else{$(".ext-field-2 .bs4").removeClass("on_1").addClass("on_0")}}}if(d===23){switch(c.type){case"9000":if(c.value==="off"){$(".resinfo_bl").empty()}if(c.value==="on"){return drawBasketField(window.updateresult[c.event_id],true,window.one_event)}break;case"522":return $(".rts[data-eventid="+c.event_id+"] .ext_info_team_1 .ft_prcnt").html(parseInt(c.value,10)+"%");case"523":return $(".rts[data-eventid="+c.event_id+"] .ext_info_team_2 .ft_prcnt").html(parseInt(c.value,10)+"%");default:switch(c.type){case"536":case"538":case"540":$("div.tm_1_scr").addClass("spark");$(document).oneTime(2000,function(){return $("div.tm_1_scr").removeClass("spark")});break;case"537":case"539":case"541":$("div.tm_2_scr").addClass("spark");$(document).oneTime(2000,function(){return $("div.tm_2_scr").removeClass("spark")})}a=RTSSocketBuilder(c);if(a.type){a.home=one_event.home;a.away=one_event.away;a.event_id=c.event_id;if($(".resinfo_bl").is(":empty")){b=$("#yellow_basketball_tpl").render(a);$(".resinfo_bl").html(b)}$(".situation").attr("class","situation");if(a.team_name){$(".resinfo_bl .team_name").html(a.team_name)}$(".resinfo_bl .situation[data-rel]").hide();return $(".resinfo_bl .situation[data-rel="+a.type+"]").addClass(a.style).show()}}}}else{}};socketEventSuspend=function(a){$("#content li[data-eventid="+a+"] .betbut").attr("disabled",true);$("#content ul[data-eventid="+a+"] .betbut").attr("disabled",true);return soloEventSuspend(a)};socketEventUNSuspend=function(a){$("#content li[data-eventid="+a+"] .betbut").attr("disabled",false);$("#content ul[data-eventid="+a+"] .betbut").attr("disabled",false);return soloEventSuspend(a,"no")};marketReplace=function(a){socketMarketDelete(a.data.market_id_old,false);socketMarketGloablInsert(a)};marketReplaceList=function(a){_.map(a,function(b){return socketMarketDelete(b.market_id_old,true)});helpResTypeCleaner();return _.map(a,function(b){var c;c={data:b};return socketMarketGloablInsert(c,true)})};socketSwitcher=function(c){var a,b;switch(c.type){case"jackpot":jackPot(c.jackpot);break;case"event.update":socketEventUpdate(c);break;case"basket":if(c.action==="unlock"){socketBasketUnlock()}break;case"event.serving":socketEventServing(c.data);break;case"market.delete":case"market.unvisible":socketMarketDelete(c.data.market_id);break;case"market.suspend":socketMarketSuspend(c);break;case"market.unsuspend":socketMarketUnsuspend(c);break;case"market.suspend_list":socketMarketSSuspend(c);break;case"market.unsuspend_list":socketMarketSUnsuspend(c);break;case"event.delete":case"event.set_canceled":socketEventDelete(c);break;case"event.suspend":socketEventSuspend(c.data.event_id);break;case"event.unsuspend":socketEventUNSuspend(c.data.event_id);break;case"market.update":socketMarketUpdate(c);basketOutcomeUpdate(c);break;case"market.insert":socketMarketGloablInsert(c);break;case"market.insert_list":socketMarketInsertList(c);break;case"outcome.update_list":socketOutcomeUpdate(c);basketOutcomeUpdate(c);break;case"market.delete_list":case"market.unvisible_list":socketMarketDeleteList(c);break;case"event.update_result":socketUpdateResult(c.data);break;case"event.set_score":socketEventSetScore(c.data);break;case"event.undo_score":socketEventUndoScore(c.data);break;case"event.insert":if((typeof disabled_sports!=="undefined"&&disabled_sports!==null?disabled_sports.indexOf(c.data.sport_id):void 0)>=0){return}else{socketEventDelete(c);$("#sideLeft li[data-eventid="+c.data.event_id+"]").remove();socketEventInsert(c)}break;case"market.count":marketCount(c.data);break;case"market.replace":marketReplace(c);break;case"market.replace_list":marketReplaceList(c.data);break;case"event.reload":a=$.json.encode(c.data);getLeftAndCenterInner(c.data);break;case"event.set_finished":socketUpdateResult(c.data);socketSetFinished(c.data);b=eventRemoveN*1000;(function(d){return setTimeout((function(){return socketEventDelete(d)}),b)})(c);break;case"timer":socketTimer(c);break;case"deposit":setUserBalance(c.summ,c.currency);break;case"event.rts_update":socketRtsStack(c.data);break;case"event.rts_update_list":socketRtsParams(c.data);break}};init=function(b){var a;if(b==null){b="/bullet"}soundInit();a="wss://";if(document.location.protocol==="http:"){a="ws://"}b=a+document.location.host+b;socket=$.bullet(b,{websocket:true,xhrPolling:true});setInterval(function(){var g,e,d,f,c;g=new Date().getTime();f=window.timers;c=[];for(e in f){d=f[e];if((g-d)>2000){c.push(delete window.timers[e])}else{c.push(void 0)}}return c},5000);socket.onopen=function(){socketrun=true;socket.send($.json.encode({user_ssid:$.cookie("PHPSESSID")}));push_events_outcomes();$(".forwait").hide()};socket.ondisconnect=function(){socketrun=false;window.subsr={};return $(".forwait").show()};socket.onclose=function(){socketrun=false;return $(".forwait").show()};return socket.onmessage=function(k){var g,h,f,j,d,c;h=$.json.decode(k.data);f=false;if(_.isArray(h)){c=[];for(j=0,d=h.length;j<d;j++){g=h[j];f=checkForBasket(g.data);c.push(socketSwitcher(g))}return c}else{f=checkForBasket(h);return socketSwitcher(h)}}};